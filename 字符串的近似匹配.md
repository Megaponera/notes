# 字符串的近似匹配

假设有S(s1,s2,s3,...,sn)、T(t1,t2,t3,...,tm)两个字符串，可以用S的前i个字符，与T的前j个字符进行近似匹配，并用二维数组D[m+1] [n+1]来记录S的前i个字符与T的前j个字符近似匹配，需要进行插入、删除和修改操作的总次数

匹配过程中，会出现的几种情况：

- i = 0 || j = 0

  因为i=0或者j=0时，其中一个字符串为空，那么只需要根据另一个字符串，依次插入相应的字符即可完成匹配，因此D[i] [0] = i,
  D[0] [j] = j

- si = tj
  1. s(i-1) != si && tj != t(j-1)：例如axxb与asb，i=3,j=2，因为si = tj，那么只需要{s1,s2,...,s(i-1)}与{t1,t2,t3,...,t(i-1)}近似匹配完成，对应的{s1,s2,...,si}与{t1,t2,t3,...,tj }也能完全匹配，即D[i] [j] = D[i-1] [j-1]
  2. s(i-1) == si ^ tj == t(j-1)：例如abb与cb的近似匹配，i=2,j=1时，其中一个字符串满足当前字符与前一个字符相同(abb)，由于ab与cb的近似匹配已经达到最优，所以abb与cb匹配时，abb中的si=b是多余的字符，所以将其删除，对应的D[i] [j] = D[i-1] [j] (ab与cb近似匹配) + 1 (删除多余的字符)，s和t互换时，对应的D[i] [j] = D[i] [j-1] + 1
     也可以按照第一个情况来解释
- si != tj
  1. i > j：因为近似匹配后的两个字符串长度一定相等，所以当si != tj 且i > j，那么si便没必要保留在当前匹配的字符串中，而当前匹配的总操作数为{ s1,s2,...,s(i-1) }与{ t1,t2,...,tj }匹配的操作数加上一次删除操作，即D[i] [j] = D[i-1] [j] + 1
  2. i < j：与情况1一致，D[i] [j] = D[i] [j-1] + 1
  3. i = j：因为当前长度相同，因此si、tj都保留；将其中一个字符修改为另一个字符，即令si = tj，那么根据 (si = tj) 的情况进行处理，此时D[i] [j] = D[i-1] [j-1] + 1 (修改操作)

**综上所述：**

- **D[i] [j] = 0，i=0 || j=0**
- **D[i] [j] = min{ D[i-1] [j-1] , D[i] [j-1]+1 , D[i-1] [j]+1 }，si = tj，i > 0 && j > 0**
- **D[i] [j] = min{ D[i-1] [j-1]+1 , D[i] [j-1]+1 , D[i-1] [j]+1 }，si != tj，i > 0 && j > 0**



例：S = "grammer"，T = "grameer"

| S\T  | ""   | g    | r    | a    | m    | e    | e    | r    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| ""   | 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    |
| g    | 1    | 0    | 1    | 2    | 3    | 4    | 5    | 6    |
| r    | 2    | 1    | 0    | 1    | 2    | 3    | 4    | 5    |
| a    | 3    | 2    | 1    | 0    | 1    | 2    | 3    | 4    |
| m    | 4    | 3    | 2    | 1    | 0    | 1    | 2    | 3    |
| m    | 5    | 4    | 3    | 2    | 1    | 1    | 2    | 3    |
| e    | 6    | 5    | 4    | 3    | 2    | 1    | 1    | 2    |
| r    | 7    | 6    | 5    | 4    | 3    | 2    | 2    | 1    |

**最终输出：1**



例：S = "acdegh"，T = "abceefg"

对应的最小操作数矩阵D

| S\T  | ""   | a    | b    | c    | e    | e    | f    | g    |
| :--- | :--- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| ""   | 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    |
| a    | 1    | 0    | 1    | 2    | 3    | 4    | 5    | 6    |
| c    | 2    | 1    | 1    | 1    | 2    | 3    | 4    | 5    |
| d    | 3    | 2    | 2    | 2    | 2    | 3    | 4    | 5    |
| e    | 4    | 3    | 3    | 3    | 2    | 2    | 3    | 4    |
| g    | 5    | 4    | 4    | 4    | 3    | 3    | 3    | 3    |
| h    | 6    | 5    | 5    | 5    | 4    | 4    | 4    | 4    |

**最终输出：1**